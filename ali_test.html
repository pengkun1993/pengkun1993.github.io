<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>大尺寸广告图展示</title>
    <style type="text/css">
      .canvas{
        border: 0;
        margin: 0;
        padding: 0;
        outline: none;
      }
      #ad1,#ad2{
        font-size: 0px;
      }
    </style>
  </head>
  <body>
    <div id="ad1" style="width:400px;height:400px;overflow:hidden">
      <!-- 请自行添加canvas元素 -->
    </div>
    <div id="ad2" style="width:500px;height:700px;overflow:hidden"> 
    </div>
    <script>
      function drawLargeImage($container, imageSrc) {

        var container_w=parseInt($container.offsetWidth);
        var container_h=parseInt($container.offsetHeight);

        var can_width=container_w;
        var can_height=40000/can_width;
        //插入canvas
        var can_num=Math.ceil(container_h/can_height);
        var tempframe=document.createDocumentFragment();
        for(var i=0;i<can_num;i++){
          var acan=document.createElement('canvas');
          acan.setAttribute('class','canvas');
          tempframe.appendChild(acan);
        }
        $container.appendChild(tempframe);

        var imgObj=new Image();
        imgObj.src=imageSrc;
        imgObj.onload=function(){
          var cans=$container.getElementsByTagName('canvas');
          for(var i=0;i<can_num;i++){
            cans[i].width=can_width;
            cans[i].height=can_height;

            var ctx=cans[i].getContext('2d');
            var sx=0;//开始裁剪的x坐标
            var sy=i*can_height;//开始裁剪的y坐标
            
            ctx.drawImage(imgObj,sx,sy,can_width,can_height,0,0,can_width,can_height);
            
          }
        };
      }
      drawLargeImage(document.getElementById('ad1'), 'https://gw.alicdn.com/tfs/TB163pKdMmTBuNjy1XbXXaMrVXa-400-400.jpg');
      drawLargeImage(document.getElementById('ad2'), 'https://gw.alicdn.com/tfs/TB1EaOddKuSBuNjy1XcXXcYjFXa-500-700.jpg');
    </script>
  </body>
</html>